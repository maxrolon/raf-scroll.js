{"version":3,"sources":["node_modules/browser-pack/_prelude.js","test/dev.js","src/index.js"],"names":["_index","require","_index2","default","x","y","console","dir","requestFrame","window","requestAnimationFrame","cancelFrame","cancelAnimationFrame","scrollChanged","prevY","idle","queue","timeout","tickId","init","every","prefix","isSupported","enable","addEventListener","debounce","document","body","disable","removeEventListener","tick","handleScroll","pageYOffset","forEach","fn","clearTimeout","setTimeout","detectIdle","cb","push","warn"],"mappings":"AAAA;mEEAA,IAAIQ,cAAeC,OAAOC,sBACtBC,YAAeF,OAAOG,qBACtBC,cAAAA,OAAeR,EAAAA,OAAGS,OAAQ,EAAIC,MAAO,EAAMC,SAAYC,QAAAA,OAASC,OAAAA,OAAQC,MAAO,CAE9EX,gBACF,KAAM,MAAO,SAAU,KAAKY,MAAM,SAAAC,GAIjC,MAHAb,cAAeC,OAAOY,EAAS,yBAC/BV,YAAeF,OAAOY,EAAS,yBAChBZ,OAAOY,EAAS,gCACvBb,cAIZ,IAAMc,eAAgBd,aAEhBe,OAAS,WACbd,OAAOe,iBAAiB,SAAUC,UAClCC,SAASC,KAAKH,iBAAiB,YAAaC,WAGxCG,QAAU,WACdnB,OAAOoB,oBAAoB,SAAUJ,UACrCC,SAASC,KAAKE,oBAAoB,YAAaJ,WAG3CA,SAAW,WACVP,SACHU,UACAE,SAIEA,KAAO,WACXZ,OAASV,aAAauB,eAGlBA,aAAe,WACnB1B,EAAII,OAAOuB,YACXhB,MAAMiB,QAAS,SAAAC,GAAA,MAAMA,GAAG7B,EAAGS,SAE3BD,eAAgB,EACZC,OAAST,IACXQ,eAAgB,EAChBC,MAAQT,GAGNQ,eACFsB,aAAalB,SACbA,QAAU,MACAA,UACVA,QAAUmB,WAAWC,WAAY,MAGnCP,QAGIO,WAAa,WACjB1B,YAAYO,QACZA,OAAS,KACTK,0BAGa,SAAAe,GACThB,aACFN,MAAMuB,KAAKD,GACNnB,OACHA,MAAO,EACPM,WACAF,WAGFjB,QAAQkC,KAAK;;qFDvEjB,GAAAxC,QAAAC,QAAA,6DAEA,EAAAC,QAAAC,SAAQ,SAACC,EAAEC,GAAH,MAASC,SAAQC,KAAKH,EAAEC","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import scroll from './../src/index.js'\n\nscroll( (x,y) => console.dir([x,y]) )\n","let requestFrame = window.requestAnimationFrame\nlet cancelFrame  = window.cancelAnimationFrame\nlet scrollChanged, y, prevY = -1, idle = true, queue = [], timeout, tickId, init = false\n\nif (!requestFrame) {\n  ['ms', 'moz', 'webkit', 'o'].every(prefix => {\n    requestFrame = window[prefix + 'RequestAnimationFrame'];\n    cancelFrame  = window[prefix + 'CancelAnimationFrame'] ||\n                   window[prefix + 'CancelRequestAnimationFrame'];\n    return !requestFrame;\n  })\n}\n\nconst isSupported = !!requestFrame\n\nconst enable = () => {\n  window.addEventListener('scroll', debounce)\n  document.body.addEventListener('touchmove', debounce)\n}\n\nconst disable = () => {\n  window.removeEventListener('scroll', debounce)\n  document.body.removeEventListener('touchmove', debounce)\n}\n\nconst debounce = () => {\n  if (!tickId){\n    disable()\n    tick()\n  }\n}\n\nconst tick = () => {\n  tickId = requestFrame(handleScroll)\n}\n\nconst handleScroll = () => {\n  y = window.pageYOffset\n  queue.forEach( fn => fn(y, prevY) )\n\n  scrollChanged = false\n  if (prevY != y){\n    scrollChanged = true\n    prevY = y\n  }\n\n  if (scrollChanged){\n    clearTimeout(timeout)\n    timeout = null\n  } else if (!timeout){\n    timeout = setTimeout(detectIdle, 200)\n  }\n\n  tick()\n}\n\nconst detectIdle = () => {\n  cancelFrame(tickId)\n  tickId = null\n  enable()\n}\n\nexport default cb => {\n  if (isSupported){\n    queue.push(cb)\n    if (!init){\n      init = true\n      debounce()\n      enable()\n    }\n  } else {\n    console.warn('Request Animation Frame not supported')\n  }\n}"]}